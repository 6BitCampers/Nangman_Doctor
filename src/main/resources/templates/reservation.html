<!doctype html>
<html lang="ko" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">

<body>

<div layout:fragment="content">
    <div class="hero overlay">
        <div class="img-bg rellax">
            <img src="images/hero_2.jpg" alt="Image" class="img-fluid">
        </div>
        <div class="container">
            <div class="row align-items-center justify-content-center">
                <div class="col-lg-6 mx-auto text-center d-flex flex-column align-items-center">
                    <h1 class="heading" data-aos="fade-up" style="margin-bottom: 10px; white-space: nowrap;">예약하기</h1>
                    <p data-aos="fade-up" style="white-space: nowrap;">병원 예약 페이지입니다.</p>
                </div>
            </div>
        </div>
    </div>


    <nav class="site-nav mt-3">
        <div class="container">
            <div class="section">
                <div class="container">
                    <div class="row">
                        <div class="col-12" data-aos="fade-up" data-aos-delay="0">
                            <h2 class="heading mb-5">예약 정보 입력</h2>
                        </div>
                        <div class="col-lg-4 mb-5 mb-lg-0" data-aos="fade-up" data-aos-delay="100">
                            <div class="contact-info">
                                <div class="address mt-4">
                                    <i class="icon-room"></i>
                                    <h4 class="mb-2">Location:</h4>
                                    <p th:text="${HosInfoDto.getInfo_addr()}"></p>
                                </div>
                                <div class="open-hours mt-4">
                                    <i class="icon-clock-o"></i>
                                    <h4 class="mb-2">Open Hours:</h4>
                                    <p>
                                        Sunday-Friday:<br>
                                        11:00 AM - 2300 PM
                                    </p>
                                </div>
                                <div class="phone mt-4">
                                    <i class="icon-phone"></i>
                                    <h4 class="mb-2">Call:</h4>
                                    <p th:text="${HosInfoDto.getInfo_hp()}"></p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row justify-content-center">
                        <div class="col-lg-6" data-aos="fade-up" data-aos-delay="200">
                            <form class="space-y-4"  th:action="@{/reserveProc}" method="post" id="reservationForm" onsubmit="return handleSubmit(event)" style="max-width: 800px; width: 200%; margin: 0 auto;">
                                <div class="row mb-4">
                                    <div class="col-6">
                                        <input type="text" class="form-control" placeholder="이름" id="reservation_name" name="name" th:value="${name}" required="">
                                    </div>
                                    <div class="col-6">
                                        <input type="date" class="form-control" id="reservation_date" name="reservation_date" required="">
                                    </div>
                                </div>
                                <div class="row mb-4">
                                    <div class="col-12">
                                        <select class="form-control" id="reservation_time" name="reservation_time" required="">
                                            <option value="" disabled selected>예약 시간</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="row mb-4">
                                    <div class="col-12">
                                        <input type="text" class="form-control" placeholder="진료명" id="reservation_reason" name="reservation_reason" required="">
                                    </div>
                                </div>
                                <div class="row mb-4">
                                    <div class="col-6">
                                        <select class="form-control" id="reservation_role" name="reservation_role" required="">
                                            <option value="1">상담</option>
                                            <option value="2">수술 경과 상담</option>
                                        </select>
                                    </div>
                                    <div class="col-6">
                                        <select class="form-control" id="reservation_face" name="reservation_face" required="">
                                            <option value="1">대면</option>
                                            <option value="2">비대면</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="row mb-4">
                                    <div class="col-12">
                                        <textarea name="reservation_content" id="reservation_content" cols="30" rows="10" class="form-control" placeholder="Message"></textarea>
                                    </div>
                                </div>
                                <input type="hidden" id="employee_no" name="employee_no" th:value="${employeeNo}"/>
                                <input type="hidden" id="info_no" name="info_no" th:value="${info_no}"/>
                                <div class="row">
                                    <div class="col-12">
                                        <button type="submit" class="btn btn-primary w-100" style="height: 60px; font-size: 1.5rem; background-color: darkorange;">등록</button>
                                    </div>
                                </div>
                            </form>
                        </div>

                    </div>
                </div>
            </div>


            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    var today = new Date().toISOString().split('T')[0];
                    document.getElementById('reservation_date').setAttribute('min', today);

                    var timeTable = document.getElementById('reservation_time');
                    for (var i = 6; i < 24; i++) {
                        var startTime = i < 10 ? '0' + i + ':00' : i + ':00';
                        var endTime = (i + 1) < 10 ? '0' + (i + 1) + ':00' : (i + 1) + ':00';
                        var option = document.createElement('option');
                        option.value = startTime + ' - ' + endTime;
                        option.textContent = startTime + ' - ' + endTime;
                        timeTable.appendChild(option);
                    }
                });

                function handleSubmit(event) {
                    var timeSelect = document.getElementById('reservation_time');
                    if (timeSelect.value === "") {
                        alert('예약 시간을 선택해 주세요.');
                        event.preventDefault();
                        return false;
                    }

                    if (!confirm('예약 확정이 되었습니다. 병원에 메일 보내드릴게요~')) {
                        event.preventDefault();
                        return false;
                    }

                    return true;
                }
            </script>
            <style>
                body {
                    font-family: Arial, sans-serif;
                    margin: 10px;
                }

                .form-group {
                    margin-bottom: 10px;
                }

                label {
                    display: block;
                    margin-bottom: 5px;
                }

                input, select, textarea, button {
                    width: 200%;
                    margin: 5px 0;
                    box-sizing: border-box;
                    font-size: 1.2rem;
                }

                .contact-info {
                    margin-top: 30px;
                }

                form {
                    max-width: 100px;
                    width: 100%;
                    padding: 10px;
                    box-sizing: border-box;
                }

                .form-control {
                    display: block;
                    width: 100%;
                    padding: 0.75rem 1rem;
                    font-size: 1.2rem;
                    line-height: 1.5;
                    color: #495057;
                    background-color: #fff;
                    background-clip: padding-box;
                    border: 1px solid #ced4da;
                    border-radius: 0.25rem;
                    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
                }

                button {
                    color: #fff;
                    background-color: Orange;
                    border-color: #007bff;
                    display: block;
                    width: 100%;
                    padding: 0.75rem 1rem;
                    font-size: 1.5rem;
                    line-height: 1.5;
                    border-radius: 0.25rem;
                    cursor: pointer;
                }

                button:hover {
                    background-color: #0056b3;
                    border-color: #004085;
                }
            </style>
        </div>
    </nav>

</div>
</body>
</html>
