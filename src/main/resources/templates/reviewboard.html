<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">
<div layout:fragment="content" class="section section-2" style="height: 800px;margin-left: 50px">
    <table class="table" style="width: 70%; ">
        <tr>
            <th>번호</th>
            <th>제목</th>
            <th>평점</th>
            <th>작성자</th>
            <th>작성일</th>
            <th>조회수</th>
        </tr>
        <tr th:each="item,itemStat:${list}" >
            <td th:text="${itemStat.count}"></td>
            <td>
                <form th:action="@{/reviewboard/detail}" method="post">
                    <input type="hidden" name="review_no" th:value="${item.review_no}" />
                    <input type="hidden" name="userId" th:value="${#authentication.name}" />
                    <button type="submit" th:text="${item.review_title}"></button>
                </form>
            </td>
            <td><span class="reviewStarsBoard"></span>
                <script th:inline="javascript">
                    let s = '';
                    let ratings =/*[[${item.review_likecount}]]*/0;
                    console.log(ratings);
                    for (let i = 0; i < ratings; i++) {
                        s += `<span style="color: gold">&#9733</span>`;
                    }
                    for (let i = 0; i < ratings - 5; i++) {
                        s += `<span>&#9734;</span>`;
                    }
                    $(".reviewStarsBoard").html(s);
                </script></td>
            <td th:text="${userMap[item.user_no].user_name}"></td>
            <td th:text="${item.getFormattedWriteday()}"></td>
            <td th:text="${item.review_viewcount}"></td>
        </tr>
    </table>
</div>
